### 아이템57. 소스맵을 사용하여 타입스크립트 디버깅하기

- 일반적으로 타입스크립트 코드를 디버깅하면 타입스크립트 코드를 디버깅 하는것이 아니다.
  디버거는 런타임에 동작하기 때문에 전처리기, 컴파일러, 압축기를 거친 "자바스크립트" 코드를 디버깅한다.

- 소스맵이란?

  - 이러한 디버깅 문제를 해결하기 위해서 타입스크립트에서 내놓은것이 ###소스맵 (source map)### 이다.
  - 소스맵은 변환된 코드의 위치와 심벌들을 원본 코드의 원래 위치와 심벌들로 매핑한다.

- 사용법

  - tsconfig.json에서 sourceMap 옵션을 설정해준다.
  - 코드를 컴파일하면 _.js 파일과 _.js.map 파일이 생성된다.
  - 소스맵이 js파일과 같이 있으면 브라우저의 디버거에 새로운 _index.ts_ (italic) 파일이 나타난다. (italic글꼴의 파일은 웹페이지에 포함된 '실제' 파일이 아니라는 뜻이다.)

- 알아야할 점

  - 타입스크립트와 함꼐 번들러나 압축기를 사용하고 있다면, 번들러나 압축기가 각자의 소스맵을 생성하게 된다.
    이상적인 디버깅 환경이 되려면 생성된 자바스크립트가 아닌 원본 타입스크립트 소스로 매핑되도록 해야한다.
    번들러가 기본적으로 타입스크립트를 지원한다면 별도의 설정 없이 잘 동작해야 한다.
    그렇지 않다면 번들러가 소스맵을 인식 할 수 있도록 추가적인 설정이 필요하다.
  - production 환경에 소스맵이 유출되고 있는지 확인해야 한다.
    디버거를 열지 않는 이상 소스맵은 로드되지 않으므로, 실제 사용자에게 성능 저하는 일어나지 않는다.
    그러나 소스맵의 원본 코드에 인라인 복사본이 포함되어 있다면 공개해서는 안 될 내용이 들어 있을 수 있다.

- 요약
  - 원본 코드가 아닌 변환된 자바스크립트 코드를 디버깅하지 말아야한다.
    소스맵을 사용해서 런타임에 타입스크립트 코드를 디버깅해야한다.
  - 소스맵이 최종적으로 변환된 코드에 완전히 매핑되었는지 확인해야한다.
  - 소스맵에 원본 코드가 그대로 포함되도록 설정되어 있을 수 있다. 주의해야한다.
