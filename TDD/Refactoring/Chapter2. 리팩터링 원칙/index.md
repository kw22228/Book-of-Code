### 리팩터링 원칙

- 리팩터링 이란?

  - [명사]: 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하고 쉽도록 내부 구조를 변경하는 기법
  - [동사]: 소프트웨어의 겉보기 동작은 그대로 유지한 채, 여러가지 리팩터링 기법을 적용해서 소프트웨어를 재구성하다.
    즉 리팩터링은 코드를 변경하기 전과 후의 코드가 똑같이 동작해야만 한다.
    완전히 똑같다는 말이 아니라 성능은 변할 수 있어도 사용자 시점에서는 달라지는 점이 없어야 한다.

- 두개의 모자

  - 소프트웨어를 개발 할 때는 목적을 명확하게 구분해야 한다.
    목적이 '기능 추가'냐, '리팩터링'이냐.
  - 목적이 기능 추가일 경우: 기존코드를 절대 건드리지 않고 새 기능을 추가하기만 한다.
  - 목적이 리팩터링 일 경우: 기능 추가는 절대 하지 않고 오로지 코드 재구성에만 전념한다. (새로운 테스트도 만들지 않는다.)

- 리팩터링을 하는 이유?

  - 리팩터링을 하면 소프트웨어 설계가 좋아진다.
  - 리팩터링을 하면 소프트웨어를 이해하기 쉬워진다.
  - 리팩터링을 하면 버그를 쉽게 찾을 수 있다.
  - 리팩터링하면 프로그래밍 속도를 높일 수 있다.

- 리팩터링은 언제 해야 할까?

  - 3의 법칙

    1. 처음에는 그냥 한다.
    2. 비슷한일을 두번째로 하게 되면(중복이 생겼다) 당황하겠지만, 그래도 계속 진행한다.
    3. 비슷한 일을 세 번째 하게 되면 리팩터링 한다.

  - 준비를 위한 리팩터링: 기능을 쉽게 추가하게 만들기

    - 코드를 살펴보면서 구조를 살짝 바꾸면 다른 작업을 하기가 훨씬 쉬워질 만한 부분을 찾는다.

  - 이해를 위한 리팩터링: 코드를 이해하기 쉽게 만들기

  - 쓰레기 줍기 리팩터링

    - 간단히 수정할 수 있는것은 즉시 수정하고, 시간이 걸리는 일은 메모만 남기고 나중에 처리한다.

  - 계획된 리팩터링 vs 수시로 하는 리팩터링
    - 앞서 본 '준비를 위한 리팩터링', '이해를 위한 리팩터링', '쓰레기 줍기 리팩터링'은 모두 기회가 될 대만 진행한다.
    - 하지만 리팩터링은 프로그래밍을 할때 자연히 녹아들어야한다. 예를들어 기능을 추가하거나 버그를 잡는동안 리팩터링도 함께 진행한다. (수시로 하는 리팩터링)

- 리팩터링을 하지 말아야 할 때

  - 외부 API 다루듯 호출해서 쓰는 코드라면 지저분해도 그냥 쓴다. 내부 동작을 이해해야 할 시점에 리펙터링을 해야 효과가 있기 때문이다.
  - 리팩터링하는 것보다 처음부터 새로 작성하는게 쉬울 때도 리팩터링 하지 않음.

- 리팩터링 시 고려해야 할 문제
