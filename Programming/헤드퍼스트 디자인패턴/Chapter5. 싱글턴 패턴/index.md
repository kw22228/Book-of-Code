### 싱글턴 패턴

#### 싱글턴 패턴의 정의

- 싱글턴 패턴은 클래스 인스턴스를 하나만 만들고, 그 인스턴스로의 전역 접근을 제공합니다.
- 싱글턴 패턴을 실제로 적용할 때는 클래스에서 하나뿐인 인스턴스를 관리하도록 만들면 된다.
  그리고 다른 어떤 클래스에서도 자신의 인스턴스를 추가로 만들지 못하게 해야 한다. (고유한 인스턴스)
- 어디서든 해당 인스턴스에 접근할 수 있도록 전역 접근 지점을 제공한다.
  해당 인스턴스가 필요하면 클래스에서 요청할 수 있게 만들어놓고, 고유한 인스턴스를 건네주도록 만든다.

#### 싱글턴 패턴의 멀티스레딩 문제

- 멀티스레드로 인해 해당 인스턴스 생성 메소드에 여러 스레드가 동시다발적으로 접근한다면 인스턴스의 유무 판단 시점에 없다고 판단되어 여러개의 인스턴스가 생성될 수 있다. 이러한 동시성 문제를 해결 해보자.
- 해결 방법
  1. syncronized (성능저하 문제발생)
     - synchronized를 사용하여 해당 메소드에 동시에 접근을 한다면 첫번째로 접근한 스레드가 메소드 사용이 전부 끝날때까지 기다렷다가 다음 스레드가 사용하는 "순차적 실행"이 보장된다. 하지만 순차적 실행을 위해 락을 걸기 때문에 성능저하가 있지 않을지..
     - 하지만, 병목이 일어나는게 아니면 그냥 사용하자..
  2. 인스턴스가 필요할때는 생성하지말고 처음부터 만들자.
     - private static instance: ChocolateBoiler = new ChocolateBoiler();
       필드에 초기화 해두자.
     - 클래스가 로딩될때 하나뿐인 인스턴스를 만들어둔다.
  3. DCL(Double-Checked Locking)을 써서 getInstance()에서 동기화 되는 부분을 줄인다.
     - DCL을 사용하면 인스턴스가 생성되어 있는지 확인한 다음 생성되어 있지 않을때만 동기화 할 수 있다. 즉, 처음에만 동기화하고 그다음은 동기화하지않음.
