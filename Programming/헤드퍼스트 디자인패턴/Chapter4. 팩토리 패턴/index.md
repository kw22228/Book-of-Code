### 팩토리 패턴

#### new에서 생기는 문제점.

- 사실 new자체는 문제가 없다. 실제 문제인것은 바로 '변화'이다.
  new로 인해서 직접적으로 클래스를 인스턴스화하는 "구상 클래스"가 많아진다면 클래스가 추가될때마다 코드를 고쳐야하므로 문제가 생길 수 있다.
  즉, 변경에 닫혀 있는 코드가 되는 것이다. (OCP 원칙 - 기존 클래스는 닫혀있어도, 새로운 클래스에는 열려있어야함.)

#### 정적 팩토리

- 장점

  - 정적 팩토리를 사용하게되면 인스턴스를 만들지않고 사용할 수 있다.
  - 생성자는 이름이 클래스와 같아야되지만 정적 메소드는 더 구체적인 이름을 제공할 수 있기 때문에
    코드를 읽기 더 쉽게 만든다.
  - 생성하려는 객체의 수를 제한할 수 있다. (싱글턴을 이용하여 인스턴스를 공유함)

- 단점
  - 서브 클래스를 만들어서 객체 생성 메소드의 행동을 변경할 수 없다.
    - 정적 팩토리 메소드가 있는 클래스를 상속받아도 자식에서 팩토리 메소드를 오버라이드 할 수 없기 때문에 자식클래스에서 맞게끔 객체를 생성하게 할 수 없다.

#### 팩토리 메소드 패턴의 정의

- 객체를 생성할 때 필요한 인터페이스를 만든다.
- 어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정합니다.
- 팩토리 메소드 패턴을 사용하면 클래스 인스턴스 만드는 일을 서브클래스에게 맡기게 된다.
- 사용하는 서브클래스에 따라 생산되는 객체 인스턴스가 결정된다.

#### 디자인 원칙

- 의존성 뒤집기 원칙

  - 추상화된 것에 의존하게 만들고 구상 클래스에 의존하지 않게 만든다.
  - 구상 클래스처럼 구체적인 것이 아닌 추상 클래스나 인터페이스와 같이 추상적인 것에 의존하는 코드를 만들어야한다.

- 의존성 뒤집기에 위배되는 디자인
  1. 변수에 구상 클래스의 래퍼런스를 저장하지 말아야한다.
  2. 구상 클래스에서 유도된 클래스를 만들지 말아야한다. (인터페이스나 추상클래스처럼 추상화된 것으로부터 클래스를 만들어야 한다.)
  3. 베이스 클래스에 이미 구현되어 있는 메소드를 오버라이드 하지 말아야한다. (베이스 클래스에서 사용하는 메소드는 모든 서브클래스에서 공유할 수 있는 것만 하자.)
